<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Viaje.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;VueloUY&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">vuelouy.dominio</a> &gt; <span class="el_source">Viaje.java</span></div><h1>Viaje.java</h1><pre class="source lang-java linenums">/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package vuelouy.dominio;

import java.util.ArrayList;
import java.util.Calendar;
import static java.util.Calendar.getInstance;

/**
 * Método qeu controla y matiene los datos 
 * aserca del viaje en avión.
 * 
 */
public class Viaje {
    
    /** Origen del viaje.**/
    private String origen;
    /** Destino del viaje.**/
    private String destino;
    /** Dato que almacena la fecha de partida del viaje.**/
    private Calendar fechaPartida;
    /** Dato que almacena la fecha de arribo del viaje.**/
    private Calendar fechaArribo;
    /** Dato que almacena la lista de pedidos pendientes realizados durante el viaje.**/
    private final ArrayList&lt;Pedido&gt; listaPedidos;
    /** Dato que almacena el nombre del pasajero al que le pertenece el sistema.**/
    private String nombrePasajero;
    /** Dato que almacena número de asiento donde se encuentra el ssistema alojado.**/
    private String asiento;
    
    private Calendar horaViajeActual;

    
    
    private Calendar duracion;

    /**
     * Constructor por defecto
     */
<span class="nc" id="L43">    public Viaje() {</span>
<span class="nc" id="L44">        this.setOrigen(&quot;&quot;);</span>
<span class="nc" id="L45">        this.setDestino(&quot;&quot;);</span>
<span class="nc" id="L46">        this.setAsiento(&quot;&quot;);</span>
<span class="nc" id="L47">        this.setNombrePasajero(&quot;&quot;);</span>
<span class="nc" id="L48">        listaPedidos = new ArrayList&lt;&gt;();</span>

<span class="nc" id="L50">        Calendar partida = getInstance();</span>
<span class="nc" id="L51">        partida.set(0, 0, 0, 0, 0, 0);</span>
<span class="nc" id="L52">        Calendar arribo = getInstance();</span>
<span class="nc" id="L53">        arribo.set(0, 0, 0, 0, 0, 0);</span>

<span class="nc" id="L55">        this.setFechaPartida(partida);</span>
<span class="nc" id="L56">        this.setFechaArribo(arribo);</span>
<span class="nc" id="L57">        this.setHoraViajeActual(partida);</span>
<span class="nc" id="L58">    }</span>

    
    public Viaje (String origen, String destino, String nombrePasajero,
            String asiento, int anioPartida, int mesPartida, int diaPartida,
            int horaPartida, int minPartida, int segPartida, int horaViaje,
<span class="fc" id="L64">            int minutosViaje) {</span>
<span class="fc" id="L65">        this.setOrigen(origen);</span>
<span class="fc" id="L66">        this.setDestino(destino);</span>
<span class="fc" id="L67">        this.setAsiento(asiento);</span>
<span class="fc" id="L68">        this.setNombrePasajero(nombrePasajero);</span>
<span class="fc" id="L69">        listaPedidos = new ArrayList&lt;&gt;();</span>

<span class="fc" id="L71">        Calendar partida = getInstance();</span>
<span class="fc" id="L72">        partida.set(anioPartida, mesPartida,</span>
                diaPartida, horaPartida, minPartida, segPartida);
<span class="fc" id="L74">        Calendar horaActual = getInstance();</span>
<span class="fc" id="L75">        horaActual.set(anioPartida, mesPartida,</span>
                diaPartida, horaPartida, minPartida, segPartida);
<span class="fc" id="L77">        Calendar arribo = getInstance();</span>
<span class="fc" id="L78">        arribo.set(anioPartida, mesPartida, diaPartida, horaPartida + horaViaje,</span>
                minPartida + minutosViaje, segPartida);

<span class="fc" id="L81">        this.setFechaPartida(partida);</span>
<span class="fc" id="L82">        this.setFechaArribo(arribo);</span>
<span class="fc" id="L83">        this.setHoraViajeActual(horaActual);</span>
        
<span class="fc" id="L85">        Calendar duracionViaje = getInstance();</span>
<span class="fc" id="L86">        duracionViaje.set(Calendar.MINUTE, minutosViaje);</span>
<span class="fc" id="L87">        duracionViaje.set(Calendar.HOUR_OF_DAY, horaViaje);</span>
        
<span class="fc" id="L89">        this.setDuracion(duracionViaje);</span>
<span class="fc" id="L90">    }</span>

    public Calendar getHoraViajeActual() {
<span class="fc" id="L93">        return horaViajeActual;</span>
    }

    public void setHoraViajeActual(Calendar unaHoraViajeActual) {
<span class="fc" id="L97">        horaViajeActual = unaHoraViajeActual;</span>
<span class="fc" id="L98">    }</span>
    
    /**
     * Método de acceso al nombre del pasajero del viaje.
     * @return nombre del pasajero
     */
    public String getNombrePasajero() {
<span class="fc" id="L105">        return nombrePasajero;</span>
    }

    /**
     * Método de modificación del nombre del pasajero.
     * @param unNombrePasajero nuevo nombre del pasajero.
     */
    public void setNombrePasajero(String unNombrePasajero) {
<span class="fc" id="L113">        nombrePasajero = unNombrePasajero;</span>
<span class="fc" id="L114">    }</span>

    /**
     * Método de acceso al número de &lt;code&gt;asiento&lt;/code&gt; del pasajero.
     * @return número de asiento
     */
    public String getAsiento() {
<span class="fc" id="L121">        return asiento;</span>
    }

    /**
     * Método de modificación del número de &lt;code&gt;asiento&lt;/code&gt;.
     * @param unAsiento nuevo número de asiento
     */
    public void setAsiento(String unAsiento) {
<span class="fc" id="L129">        asiento = unAsiento;</span>
<span class="fc" id="L130">    }</span>

    /**
     * Método para agrergar un nuevo pedido a la &lt;code&gt;listaPedidos&lt;/code&gt;.
     * @param unPedido pedido nuevo.
     */
    public void agregarPedido(Pedido unPedido) {
<span class="fc" id="L137">        listaPedidos.add(unPedido);</span>
<span class="fc" id="L138">    }</span>

    /**
     * Método de acceso a la &lt;code&gt;listaPedidos&lt;/code&gt; del viaje.
     * @return la lista de pedidos.
     */
    public ArrayList getListaPedidos() {
<span class="fc" id="L145">        return listaPedidos;</span>
    }

    /**
     * Método de acceso al &lt;code&gt;origen&lt;/code&gt; del viaje
     * @return 
     */
    public String getOrigen() {
<span class="fc" id="L153">        return origen;</span>
    }

    /**
     * Método de modificación de el &lt;code&gt;origen&lt;/code&gt; del viaje.
     * @param unOrigen nuevo origen
     */
    public void setOrigen(String unOrigen) {
<span class="fc" id="L161">        origen = unOrigen;</span>
<span class="fc" id="L162">    }</span>

    /**
     * Método de acceso al &lt;code&gt;destino&lt;/code&gt; del viaje.
     * @return
     */
    public String getDestino() {
<span class="fc" id="L169">        return destino;</span>
    }

    /**
     * Método de modificación del &lt;code&gt;destino&lt;/code&gt; del viaje.
     * @param unDestino nuevo destino.
     */
    public void setDestino(String unDestino) {
<span class="fc" id="L177">        this.destino = unDestino;</span>
<span class="fc" id="L178">    }</span>

    /**
     * Método de acceso de la &lt;code&gt;fechaPartida&lt;/code&gt; del viaje.
     * @return fecha de partida del viaje.
     */
    public Calendar getFechaPartida() {
<span class="nc" id="L185">        return fechaPartida;</span>
    }
    
    /**
     * Método de modificación de la &lt;code&gt;fechaPartida&lt;/code&gt; del viaje.
     * @param unaFechaPartida nueva fecha de partida.
     */
    public void setFechaPartida(Calendar unaFechaPartida) {
<span class="fc" id="L193">        fechaPartida = unaFechaPartida;</span>
<span class="fc" id="L194">    }</span>

    public Calendar getDuracion() {
<span class="nc" id="L197">        return duracion;</span>
    }
    
    public void setDuracion(Calendar unaDuracion) {
<span class="fc" id="L201">        duracion = unaDuracion;</span>
<span class="fc" id="L202">    }</span>
    
    /**
     * Método de acceso de a la &lt;code&gt;fechaArribo&lt;/code&gt; del viaje.
     * @return fecha de arribo del viaje.
     */
    public Calendar getFechaArribo() {
<span class="fc" id="L209">        return fechaArribo;</span>
    }

    /**
     * Método de modificación de la &lt;code&gt;fechaArribo&lt;/code&gt; del viaje.
     * @param unaFechaArribo nueva fecha de arribo.
     */
    public void setFechaArribo(Calendar unaFechaArribo) {
<span class="fc" id="L217">        fechaArribo = unaFechaArribo;</span>
<span class="fc" id="L218">    }</span>

    /**
     * Método que elimina de la lista los pedidos que fueron realizados.
     * @param indexPedido lugaar numerico que ocupa un pedido en &lt;code&gt;listaPedidos&lt;/code&gt;
     */
    public void pedidoRealizado(int indexPedido) {
<span class="fc" id="L225">        this.getListaPedidos().remove(indexPedido);</span>
<span class="fc" id="L226">    }</span>

    //pos: devuelve la diferencia de fechas en segundos
    /**
     * Método para calcular las ddiferencia entre dos fechas.
     * @param fechaIn fecha inicial.
     * @param fechaFinal fecha final.
     * @return diferencia entre &lt;code&gt;fechaFinal&lt;/code&gt; - &lt;code&gt;fechaIn&lt;/code&gt; 
     * en segundos.
     */
    public int restarFechas(Calendar fechaIn, Calendar fechaFinal) {
<span class="fc" id="L237">        long inicial = fechaIn.getTime().getTime(); //devuelve fecha en milisegundos</span>
<span class="fc" id="L238">        long fin = fechaFinal.getTime().getTime();</span>
<span class="fc" id="L239">        Long diffEnSegs = (fin - inicial) / 1000; // Resta milisegundos y luego pasa a segundos</span>
<span class="fc" id="L240">        return diffEnSegs.intValue();</span>
    }

    /**
     * Método que calcula lo que resta del viaje.   
     */
    public String lapsoRestanteViaje() {
<span class="fc" id="L247">        int diffTotalSegs = this.restarFechas(this.getHoraViajeActual(), this.getFechaArribo());</span>
<span class="fc" id="L248">        int diffDias = diffTotalSegs / (60 * 60 * 24);</span>
<span class="fc" id="L249">        int diffHoras = diffTotalSegs / (60 * 60) - (diffDias * 24);</span>
<span class="fc" id="L250">        int diffMinutos = (diffTotalSegs / 60) - ((diffDias * 24 + diffHoras) * 60);</span>
<span class="fc" id="L251">        int diffSegs = diffTotalSegs - ((diffDias * 24 * 60 + diffHoras * 60) + diffMinutos) * 60;</span>
<span class="fc" id="L252">        String diferencia = &quot;&quot;;</span>

<span class="pc bpc" id="L254" title="1 of 8 branches missed.">        if (diffMinutos &lt; 10 &amp;&amp; diffMinutos &gt;= 0 &amp;&amp; diffSegs &lt; 10 &amp;&amp; diffSegs &gt;= 0) {</span>
<span class="fc" id="L255">            diferencia = diffHoras + &quot;:&quot; + &quot;0&quot; + diffMinutos + &quot;:&quot; + &quot;0&quot; + diffSegs;</span>
        } else {
<span class="fc bfc" id="L257" title="All 4 branches covered.">            if (diffMinutos &lt; 10 &amp;&amp; diffMinutos &gt;= 0) {</span>
<span class="fc" id="L258">                diferencia = diffHoras + &quot;:&quot; + &quot;0&quot; + diffMinutos + &quot;:&quot; + diffSegs;</span>
            }
<span class="pc bpc" id="L260" title="1 of 4 branches missed.">            if (diffSegs &lt; 10 &amp;&amp; diffSegs &gt;= 0) {</span>
<span class="fc" id="L261">                diferencia = diffHoras + &quot;:&quot; + diffMinutos + &quot;:&quot; + &quot;0&quot; + diffSegs;</span>
            }
        }

<span class="pc bpc" id="L265" title="1 of 4 branches missed.">        if (diffMinutos &gt; 9 &amp;&amp; diffSegs &gt; 9) {</span>
<span class="nc" id="L266">            diferencia = diffHoras + &quot;:&quot; + diffMinutos + &quot;:&quot; + diffSegs;</span>
        }

<span class="fc" id="L269">        return diferencia;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span></div></body></html>